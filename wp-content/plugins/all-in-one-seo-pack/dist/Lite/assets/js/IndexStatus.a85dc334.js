import{K as re,j as E,k as ke,m as xe,u as Ce,a as se}from"./index.4fea5b8a.js";import{C as ae}from"./Card.9a64d2e2.js";import{C as Te}from"./DonutChartWithLegend.df58f29f.js";import{c as Re,a as we,b as ce}from"./Caret.7cc96622.js";import{g as D,f as N,v as Ie,o as a,k as u,l as c,a as t,J as le,t as i,c as n,u as e,x as d,b as S,H as h,G as F,q as m,N as j,K as ue,y as Le,n as Pe}from"./runtime-dom.esm-bundler.baf35205.js";import"./translations.d159963e.js";import{u as Fe}from"./IndexStatus.7d333eb5.js";import{u as Ae}from"./PostTypes.dafa8837.js";import{u as Oe}from"./WpTable.727efe8a.js";import{C as K}from"./Tooltip.70b51a50.js";import{C as He}from"./Table.e2de1c86.js";import{a as z,t as Ve}from"./index.7fee6f1a.js";import{S as ie}from"./Link.ad58218a.js";import{S as J}from"./External.e551aa30.js";import{_ as g}from"./default-i18n.20001971.js";import{_ as $e}from"./_plugin-vue_export-helper.eefbdd86.js";import{C as Ge}from"./Blur.601d8ea8.js";import{C as je}from"./Index.a6ae6538.js";import{R as Ue}from"./RequiredPlans.8c29f2e8.js";import{u as Be}from"./Cta.bce043d1.js";import{u as Me}from"./License.857ed9ae.js";import"./helpers.114e9c35.js";import"./Slide.1db617da.js";import"./AnimatedNumber.572be72b.js";import"./numbers.9fc174f3.js";import"./Calendar.ad6a53a7.js";import"./Exclamation.a4801e64.js";import"./Mobile.e6e7cfc6.js";import"./ScrollTo.81bea8a7.js";import"./Download.7a5bbc25.js";import"./Row.c7b7fb90.js";import"./constants.a8a14dc3.js";import"./addons.e13ca687.js";import"./upperFirst.eafa5318.js";import"./toString.bbd66337.js";import"./license.ae04185d.js";const Ne={class:"post-title"},De=["onClick"],Ee={key:0,class:"row-actions"},We={class:"edit"},qe=["href"],Ke=["href"],ze=["onClick"],Je={class:"inner-row"},Qe={class:"inner-row__heading"},Xe={class:"inner-table inner-table--index-status"},Ye=t("thead",null,[t("tr",null,[t("th"),t("th"),t("th"),t("th")])],-1),Ze={key:0},et={colspan:"4"},tt={key:0},st={key:1},at=["href"],lt={scope:"col"},it={class:"inner-table__col inner-table__col--items-start"},ot={scope:"col"},nt={class:"inner-table__col inner-table__col--items-start"},rt={scope:"col"},ct={class:"inner-table__col inner-table__col--items-start"},ut=["innerHTML"],dt={scope:"col"},ht={class:"inner-table__col inner-table__col--items-start"},_t={scope:"col"},pt={class:"inner-table__col inner-table__col--items-start"},gt=["innerHTML"],mt={scope:"col"},bt={class:"inner-table__col inner-table__col--items-start"},ft=["innerHTML"],vt={scope:"col"},St={class:"inner-table__col inner-table__col--items-start"},yt=["innerHTML"],kt={scope:"col"},xt={class:"inner-table__col inner-table__col--items-start"},Ct=["innerHTML"],Tt={key:0},Rt={colspan:"4"},wt=["href"],It={class:"inner-row__heading"},Lt={class:"inner-table"},Pt={class:"inner-table__col"},Ft=["href"],At={key:1},Ot={class:"inner-row__heading"},Ht={class:"inner-table"},Vt={class:"inner-table__col"},$t=["href"],Gt={key:1},jt={class:"inner-row__heading"},Ut={class:"inner-table inner-table--rich-results"},Bt=t("thead",null,[t("tr",null,[t("th"),t("th"),t("th")])],-1),Mt={scope:"col"},Nt={class:"inner-table__col inner-table__col--items-start"},Dt={class:"rich-result-type__label"},Et={colspan:"2"},Wt={key:0,class:"rich-result-type-item-issues"},qt={key:1},Kt={class:"inner-table__col"},zt={key:1},Jt={key:2},Qt={colspan:"3"},Xt=["href"],Yt=["title"],Zt=["title"],es=["title"],ts=["title"],ss=["title"],as={key:0,class:"loader-overlay-table"},oe="searchStatisticsIndexStatus",ne="index-status-objects-table",ls={__name:"ObjectsTable",props:{paginatedRows:Object,selectedStatus:String,showTableFooter:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0}},setup(T){const o="all-in-one-seo-pack",b=re(),x=E(),y=ke(),_={richResults:g("Rich Results",o),richResultTypes:g("Rich Result Types",o),richResultTypesHelp:g("Results of the Google Rich Results Test. These are the different schema graphs that are added to the post. Empty if no rich results were found.",o),indexStatusResult:g("Index Status Result",o),sitemaps:g("Sitemaps",o),sitemapsHelp:g("Any sitemaps that this URL was listed in, as known by Google. Not guaranteed to be an exhaustive list, especially if Google did not discover this URL through a sitemap. Empty if no entries in sitemaps were found.",o),referringPages:g("Referring URLs",o),referringPagesHelp:g("URLs that link to the inspected URL, directly and indirectly.",o),issues:g("Issues",o),noIssues:g("No issues",o),notAvailable:g("N/A",o),refreshStatus:g("Refresh Status",o)},R=T,$=D(new Set),A=D(null),{items:l,parseRichResults:O,strings:I}=Fe(),{editPost:U,viewPost:r}=Ae(),{orderBy:k,orderDir:B,processAdditionalFilters:H,processChangeItemsPerPage:V,processFilterTable:W,processPagination:he,processSearch:_e,processSort:pe,searchTerm:ge,selectedFilters:Q,wpTableKey:me,wpTableLoading:X}=Oe({changeItemsPerPageSlug:oe,fetchData:b.fetchIndexStatusObjects,tableId:ne,tableRef:A.value,selectedFilters:{}}),be=N(()=>R.selectedStatus?{...Q.value,status:R.selectedStatus}:Q.value),fe=N(()=>R.paginatedRows.totals.page),ve=N(()=>[{slug:"title",label:g("Title",o),sortable:1<R.paginatedRows.totals.total,sortDir:k.value==="title"?B.value:"asc",sorted:k.value==="title"},{slug:"verdict",label:l.verdict.title,width:"110px"},{slug:"robotsTxt",label:l.robotsTxtState.title,width:"110px"},{slug:"pageFetch",label:l.pageFetchState.title,width:"110px"},{slug:"crawledAs",label:l.crawledAs.title,width:"120px"},{slug:"richResults",label:_.richResults,width:"135px"},{slug:"lastCrawlTime",label:l.lastCrawlTime.title,sortable:1<R.paginatedRows.totals.total,sortDir:k.value==="lastCrawlTime"?B.value:"asc",sorted:k.value==="lastCrawlTime",width:"120px"},{slug:"buttons",label:"",width:"60px"}]),Y=async(P,w,f)=>{f(P)},q=(P,w)=>{const f=l[w].parseValue(P[w]);let G=f==null?void 0:f.description;return w==="verdict"&&P.coverageState&&(G=P.coverageState),G?`${f.value} <div class="inner-row__desc">${G}</div>`:`${f.value}`},Se=async(P,w)=>{A.value.activeRow=null,$.value.add(w);try{await x.getInspectionResult({paths:P.path,force:!0})}catch(f){console.error(f)}finally{$.value.delete(w);try{$.value.size||await Promise.all([b.fetchIndexStatusOverview(),b.fetchIndexStatusObjects()])}catch(f){console.error(f)}}};return(P,w)=>{var G,Z,ee;const f=Ie("base-button");return a(),u(e(He),{ref_key:"table",ref:A,id:ne,"additional-filters":Object.values(((Z=(G=e(b).options)==null?void 0:G.table)==null?void 0:Z.additionalFilters)||{}),"selected-filters":be.value,"bulk-options":[],columns:ve.value,filters:[],"initial-items-per-page":e(y).settings.tablePagination[oe],"initial-page-number":fe.value,"initial-search-term":((ee=T.paginatedRows)==null?void 0:ee.searchTerm)||e(ge),key:e(me),loading:e(X)||e(b).objects.fetching,rows:T.paginatedRows.rows,"show-bulk-actions":!1,"show-header":T.showHeader,"show-table-footer":T.showTableFooter,totals:T.paginatedRows.totals,"show-items-per-page":"",onFilterTable:e(W),onPaginate:e(he),onProcessAdditionalFilters:w[0]||(w[0]=s=>e(H)({filters:s.filters,term:s.searchTerm,number:s.pageNumber})),onProcessChangeItemsPerPage:e(V),onSearch:e(_e),onSortColumn:e(pe)},{title:c(({row:s,index:v,editRow:p})=>{var C,L;return[t("div",Ne,[t("a",{href:"#",onClick:le(M=>Y(v,s,p),["prevent"]),class:"allow-click"},i(s.objectTitle),9,De)]),s!=null&&s.objectId?(a(),n("div",Ee,[t("span",We,[t("a",{href:(s==null?void 0:s.permalink)||"#",target:"_blank"},i(e(r)(((C=s==null?void 0:s.postTypeLabels)==null?void 0:C.singular)||null)),9,qe),d(" | "),t("a",{href:(s==null?void 0:s.editLink)||"#",target:"_blank"},i(e(U)(((L=s==null?void 0:s.postTypeLabels)==null?void 0:L.singular)||null)),9,Ke),d(" | "),t("a",{href:"#",onClick:le(M=>Se(s,v),["prevent","exact"])},i(_.refreshStatus),9,ze)])])):S("",!0)]}),"edit-row":c(({row:s})=>{var v;return[t("div",Je,[t("div",Qe,i(_.indexStatusResult),1),t("table",Xe,[Ye,t("tbody",null,[s.lastCrawlTime?(a(),n(F,{key:1},[t("tr",null,[t("th",lt,i(e(l).pageFetchState.title)+":",1),t("td",null,[t("div",it,[(a(),u(m(e(l).pageFetchState.getIcon(s.pageFetchState)),{width:"20",height:"20"})),d(" "+i(e(l).pageFetchState.parseValue(s.pageFetchState).value),1)])]),t("th",ot,i(e(l).crawledAs.title)+":",1),t("td",null,[t("div",nt,[(a(),u(m(e(l).crawledAs.getIcon(s.crawledAs)),{width:"20",height:"20",color:"#8C8F9A"})),d(" "+i(e(l).crawledAs.parseValue(s.crawledAs).value),1)])])]),t("tr",null,[t("th",rt,i(e(l).indexingState.title),1),t("td",null,[t("div",ct,[(a(),u(m(e(l).indexingState.getIcon(s.indexingState)),{width:"20",height:"20"})),t("div",{innerHTML:q(s,"indexingState")},null,8,ut)])]),t("th",dt,i(e(l).lastCrawlTime.title)+":",1),t("td",null,[t("div",ht,[(a(),u(m(e(l).lastCrawlTime.getIcon(s.lastCrawlTime)),{width:"20",height:"20",color:"#8C8F9A"})),d(" "+i(e(l).lastCrawlTime.parseValue(s.lastCrawlTime).value),1)])])]),t("tr",null,[t("th",_t,i(e(l).verdict.title)+":",1),t("td",null,[t("div",pt,[(a(),u(m(e(l).verdict.getIcon(s.verdict)),{width:"20",height:"20"})),t("div",{innerHTML:q(s,"verdict")},null,8,gt)])]),t("th",mt,i(e(l).googleCanonical.title)+":",1),t("td",null,[t("div",bt,[(a(),u(m(e(l).googleCanonical.getIcon()),{width:"20",height:"20",color:"#8C8F9A"})),t("span",{innerHTML:e(l).googleCanonical.parseValue(s.googleCanonical).value},null,8,ft)])])]),t("tr",null,[t("th",vt,i(e(l).robotsTxtState.title)+":",1),t("td",null,[t("div",St,[(a(),u(m(e(l).robotsTxtState.getIcon(s.robotsTxtState)),{width:"20",height:"20"})),t("div",{innerHTML:q(s,"robotsTxtState")},null,8,yt)])]),t("th",kt,i(e(l).userCanonical.title)+":",1),t("td",null,[t("div",xt,[(a(),u(m(e(l).userCanonical.getIcon()),{width:"20",height:"20",color:"#8C8F9A"})),t("span",{innerHTML:e(l).userCanonical.parseValue(s.userCanonical).value},null,8,Ct)])])]),s!=null&&s.inspectionResultLink?(a(),n("tr",Tt,[t("td",Rt,[t("a",{class:"inner-table__inspection-link button-secondary",href:s.inspectionResultLink,target:"_blank"},[d(i(e(I).inspectOnGsc)+" ",1),h(e(J),{width:"12",height:"12"})],8,wt)])])):S("",!0)],64)):(a(),n("tr",Ze,[t("td",et,[s.coverageState&&s.indexingState!=="INDEXING_ALLOWED"?(a(),n("span",tt,i(s.coverageState)+". ",1)):(a(),n("span",st,i(e(I).noResultsYetLowercase)+". ",1)),s!=null&&s.inspectionResultLink?(a(),n("a",{key:2,class:"inner-table__inspection-link",href:s.inspectionResultLink,target:"_blank"},[d(i(e(I).inspectOnGsc)+" ",1),h(e(J),{width:"12",height:"12"})],8,at)):S("",!0)])]))])]),s.lastCrawlTime?(a(),n(F,{key:0},[t("div",It,[d(i(_.sitemaps)+" ",1),h(e(K),{placement:"right"},{tooltip:c(()=>[d(i(_.sitemapsHelp),1)]),default:c(()=>[h(e(z))]),_:1})]),t("table",Lt,[t("tbody",null,[s.sitemap.length?(a(!0),n(F,{key:0},j(s.sitemap,(p,C)=>(a(),n("tr",{key:`sitemap-${C}`},[t("td",Pt,[h(e(ie),{width:20,height:20,color:"#8C8F9A"}),t("a",{href:p,target:"_blank"},i(p),9,Ft)])]))),128)):(a(),n("tr",At,[t("td",null,i(_.notAvailable),1)]))])]),t("div",Ot,[d(i(_.referringPages)+" ",1),h(e(K),{placement:"right"},{tooltip:c(()=>[d(i(_.referringPagesHelp),1)]),default:c(()=>[h(e(z))]),_:1})]),t("table",Ht,[t("tbody",null,[s.referringUrls.length?(a(!0),n(F,{key:0},j(s.referringUrls,(p,C)=>(a(),n("tr",{key:`sitemap-${C}`},[t("td",Vt,[h(e(ie),{width:20,height:20,color:"#8C8F9A"}),t("a",{href:p,target:"_blank"},i(p),9,$t)])]))),128)):(a(),n("tr",Gt,[t("td",null,i(_.notAvailable),1)]))])]),t("div",jt,[d(i(_.richResultTypes)+" ",1),h(e(K),{placement:"right"},{tooltip:c(()=>[d(i(_.richResultTypesHelp),1)]),default:c(()=>[h(e(z))]),_:1})]),t("table",Ut,[Bt,t("tbody",null,[(((v=s.richResultsResult)==null?void 0:v.detectedItems)||[]).length?(a(!0),n(F,{key:0},j(e(O)(s.richResultsResult),(p,C)=>(a(),n("tr",{key:`rich-result-type-${C}`},[t("th",Mt,[t("div",Nt,[(a(),u(m(p.icon),{color:"#8C8F9A",fill:"currentColor"})),t("span",Dt,i(p.label),1)])]),t("td",Et,[(a(!0),n(F,null,j(p.items,(L,M)=>(a(),n("div",{class:"rich-result-type-item",key:`rich-result-type-item-${M}`},[t("b",null,i(L.name),1),L.issues.length?(a(),n("div",Wt,[t("b",null,i(_.issues),1),(a(!0),n(F,null,j(L.issues,(te,ye)=>(a(),n("div",{key:`rich-result-type-item-issue-${ye}`,class:"inner-table__col"},[(a(),u(m(te.icon()))),d(" "+i(te.message),1)]))),128))])):(a(),n("div",qt,[t("div",Kt,[h(e(Re),{width:"20",height:"20"}),d(" "+i(_.noIssues),1)])]))]))),128))])]))),128)):(a(),n("tr",zt,[t("td",null,i(_.notAvailable),1)])),s!=null&&s.richResultsTestLink?(a(),n("tr",Jt,[t("td",Qt,[t("a",{class:"button-secondary",href:s.richResultsTestLink,target:"_blank"},[d(i(e(I).testWithGoogle)+" ",1),h(e(J),{width:"12",height:"12"})],8,Xt)])])):S("",!0)])])],64)):S("",!0)])]}),verdict:c(({row:s})=>[s.lastCrawlTime?(a(),n("div",{key:0,title:e(l).verdict.parseValue(s.verdict).value},[(a(),u(m(e(l).verdict.getIcon(s.verdict)),{width:"20",height:"20"}))],8,Yt)):S("",!0)]),robotsTxt:c(({row:s})=>[s.lastCrawlTime?(a(),n("div",{key:0,title:e(l).robotsTxtState.parseValue(s.robotsTxtState).value},[(a(),u(m(e(l).robotsTxtState.getIcon(s.robotsTxtState)),{width:"20",height:"20"}))],8,Zt)):S("",!0)]),crawledAs:c(({row:s})=>[s.lastCrawlTime?(a(),n("div",{key:0,title:e(l).crawledAs.parseValue(s.crawledAs).value},[(a(),u(m(e(l).crawledAs.getIcon(s.crawledAs)),{width:"20",height:"20",color:"#8C8F9A"}))],8,es)):S("",!0)]),pageFetch:c(({row:s})=>[s.lastCrawlTime?(a(),n("div",{key:0,title:e(l).pageFetchState.parseValue(s.pageFetchState).value},[(a(),u(m(e(l).pageFetchState.getIcon(s.pageFetchState)),{width:"20",height:"20"}))],8,ts)):S("",!0)]),richResults:c(({row:s})=>{var v;return[(((v=s.richResultsResult)==null?void 0:v.detectedItems)||[]).length?(a(!0),n(F,{key:0},j(e(O)(s.richResultsResult),p=>(a(),n("div",{class:"rich-result-type",key:`rich-result-type-${p.label}`},[(a(),u(m(p.icon),{fill:"currentColor"})),t("span",{class:"rich-result-type__label",title:p.label},i(p.label),9,ss)]))),128)):S("",!0)]}),lastCrawlTime:c(({row:s})=>[d(i(e(l).lastCrawlTime.parseValue(s.lastCrawlTime).value),1)]),buttons:c(({row:s,index:v,editRow:p})=>{var C,L;return[h(f,{onClick:M=>Y(v,s,p),type:((C=A.value)==null?void 0:C.activeRow)===v?"blue":"gray",disabled:e(X),class:ue([{active:((L=A.value)==null?void 0:L.activeRow)===v},"btn-toggle-row allow-click"])},{default:c(()=>[h(e(we),{width:"20"})]),_:2},1032,["onClick","type","disabled","class"]),$.value.has(v)?(a(),n("div",as,[h(e(ce))])):S("",!0)]}),_:1},8,["additional-filters","selected-filters","columns","initial-items-per-page","initial-page-number","initial-search-term","loading","rows","show-header","show-table-footer","totals","onFilterTable","onPaginate","onProcessChangeItemsPerPage","onSearch","onSortColumn"])}}},is={class:"aioseo-donut-chart-with-legend-wrapper"},os={__name:"Index",setup(T){const o=re(),b=E(),x="all-in-one-seo-pack",y={presenceOnGoogle:g("Presence on Google",x),tooltipPresenceOnGoogle:g("View at a glance how many of your posts have been indexed and discovered by Google.",x),indexOfIndividual:g("Post Index Status",x),tooltipIndexOfIndividual:g("The table below shows the index status of each of your posts, along with any extra information from Google that may be relevant as to why they are not indexed.",x),totalUrls:g("Total Posts",x)},_=D(null),R=D(""),$=N(()=>{const l=o.overview;if(!l)return[];const O=o.options.table.additionalFilters.statusOptions.options.filter(r=>!!(r!=null&&r.value)).map(r=>({...r,regex:new RegExp(r.value,"i"),name:r.label,emitValue:r.value,link:"#"}));let I=0;const U=O.map((r,k)=>{const H=l.post.results.filter(V=>r.regex.test(V==null?void 0:V.coverageState)).reduce((V,W)=>V+Number(W.count||0),0);return I+=H,{...r,count:H,ratio:k===0?100:l.post.total?H/l.post.total*100:0}}).map(r=>{if(r.value==="unknown|excluded|invalid|error"){const k=l.post.total-I;return{...r,count:r.count+k,ratio:l.post.total?(r.count+k)/l.post.total*100:0}}return r});return U.forEach((r,k)=>(k===0||U.forEach((B,H)=>(k<H&&(r.ratio=r.ratio+B.ratio),r)),r)),U}),A=async l=>{R.value=l,await Pe(),_.value.$el.querySelector(".aioseo-wp-additional-filters button").click(),R.value=""};return Le(async()=>{if(b.isConnected&&!b.shouldShowSampleReports&&!o.objects.paginated.rows.length)try{await Promise.all([o.fetchIndexStatusOverview(),o.fetchIndexStatusObjects()])}catch(l){console.error(l)}}),(l,O)=>(a(),n("div",null,[h(e(ae),{slug:"presenceOnGoogle","header-text":y.presenceOnGoogle,toggles:!1,"no-slide":""},{"header-icon":c(()=>[h(e(Ve),{width:"24",height:"24"})]),tooltip:c(()=>[d(i(y.tooltipPresenceOnGoogle),1)]),default:c(()=>[t("div",is,[e(o).overview===null?(a(),u(e(ce),{key:0,dark:""})):(a(),u(e(Te),{key:1,total:e(o).overview.post.total,parts:$.value,label:y.totalUrls,onOnLabelClick:O[0]||(O[0]=I=>A(I))},null,8,["total","parts","label"]))])]),_:1},8,["header-text"]),h(e(ae),{slug:"indexOfIndividual","header-text":y.indexOfIndividual,toggles:!1,"no-slide":""},{tooltip:c(()=>[d(i(y.tooltipIndexOfIndividual),1)]),default:c(()=>[h(e(ls),{ref_key:"refObjectsTable",ref:_,"paginated-rows":e(o).objects.paginated,"selected-status":R.value},null,8,["paginated-rows","selected-status"])]),_:1},8,["header-text"])]))}},de=$e(os,[["__scopeId","data-v-63457f4d"]]),ns={__name:"Blur",setup(T){return(o,b)=>(a(),u(e(Ge),null,{default:c(()=>[h(e(de))]),_:1}))}},rs={__name:"Index",setup(T){const{strings:o}=Be(),b=xe(),x=Ce(),y=E();return(_,R)=>(a(),n("div",null,[e(y).shouldShowSampleReports?S("",!0):(a(),u(e(ns),{key:0})),e(y).shouldShowSampleReports?S("",!0):(a(),u(e(je),{key:1,"cta-second-button-action":"",onCtaSecondButtonClick:e(y).showSampleReports,"cta-link":e(se).getPricingUrl("search-statistics","search-statistics-upsell","index-status"),"button-text":e(o).ctaButtonText,"second-button-text":e(o).ctaSecondButtonText,"cta-second-button-new-badge":"","cta-second-button-visible":"","learn-more-link":e(se).getUpsellUrl("search-statistics","index-status",e(x).isPro?"pricing":"liteUpgrade"),"feature-list":[e(o).feature1,e(o).feature2,e(o).feature3,e(o).feature4],"align-top":"","hide-bonus":!e(b).isUnlicensed},{"header-text":c(()=>[d(i(e(o).ctaHeader),1)]),description:c(()=>[h(e(Ue),{"core-feature":["search-statistics"]}),d(" "+i(e(o).ctaDescription),1)]),_:1},8,["onCtaSecondButtonClick","cta-link","button-text","second-button-text","learn-more-link","feature-list","hide-bonus"]))]))}},Ws={__name:"IndexStatus",setup(T){const o=E(),{shouldShowLite:b,shouldShowUpgrade:x}=Me();return(y,_)=>(e(x)("search-statistics","index-status")||e(b))&&!e(o).shouldShowSampleReports?(a(),u(e(rs),{key:0,class:"aioseo-search-statistics-index-status"})):(a(),u(e(de),{key:1,class:ue([{"aioseo-search-statistics-index-status--disable-click":e(o).shouldShowSampleReports},"aioseo-search-statistics-index-status"])},null,8,["class"]))}};export{Ws as default};
