import{U as k}from"./AnimatedNumber.572be72b.js";import{_ as f}from"./_plugin-vue_export-helper.eefbdd86.js";import{o as n,c as r,m as N,v as u,b as i,G as h,N as p,a,H as v,l as g,k as _,t as w,j as C,x as L,K as $,q as M}from"./runtime-dom.esm-bundler.baf35205.js";const z={emits:["resize"],props:{targetLineCount:{default:1,type:Number},unit:{default:"px",type:String},min:{default:12,type:Number},max:{default:36,type:Number},constrainToElement:{type:[Boolean,Element],default(){return!1}},elementPadding:{type:Number,default(){return 0}}},data(){return{observer:null}},methods:{calculate(){const t=this.$el,o=this.unit==="px"?1:.05;let e=this.max;if(t.style.display="inline-block",t.style.lineHeight="1px",t.style.fontSize=e+this.unit,this.constrainToElement)for(;t.offsetWidth>this.constrainToElement.offsetWidth-this.elementPadding&&e>this.min;)e-=o,t.style.fontSize=e+this.unit;else for(;t.offsetHeight>this.targetLineCount&&e>this.min;)e-=o,t.style.fontSize=e+this.unit;this.$emit("resize",{size:e,unit:this.unit}),t.style.display=null,t.style.lineHeight=null}},mounted(){this.calculate(),"MutationObserver"in window&&this.observer===null&&(this.observer=new MutationObserver(this.calculate),this.observer.observe(this.$el,{subtree:!0,characterData:!0})),window.addEventListener("resize",this.calculate)},beforeUnmount:function(){this.observer.disconnect(),window.removeEventListener("resize",this.calculate)}};function S(t,o,e,y,b,l){return n(),r("span",null,[N(t.$slots,"default")])}const T=f(z,[["render",S]]),H={components:{UtilAnimatedNumber:k,UtilFitText:T},props:{parts:{type:Array,required:!0},label:{type:String,required:!0},total:{type:Number,required:!0},animatedNumber:{type:Boolean,default(){return!0}}}},B={class:"aioseo-donut-chart"},F={key:0,viewBox:"0 0 33.83098862 33.83098862",xmlns:"http://www.w3.org/2000/svg"},q=a("circle",{class:"aioseo-donut-chart-score__circle",stroke:"#e8e8eb","stroke-dasharray":"100","stroke-linecap":"round","stroke-width":2,fill:"none",cx:"16.91549431",cy:"16.91549431",r:"15.91549431"},null,-1),E=[q],A={key:1,viewBox:"0 0 33.83098862 33.83098862",xmlns:"http://www.w3.org/2000/svg"},D=["stroke-dasharray"],P=["stroke","stroke-dasharray"],V={class:"total-amount-wrapper"},U={class:"total-amount"},I={class:"total"},W=["innerHTML"],O={class:"label"};function j(t,o,e,y,b,l){const d=u("util-animated-number"),m=u("util-fit-text");return n(),r("div",B,[e.total===0?(n(),r("svg",F,E)):i("",!0),0<e.total?(n(),r("svg",A,[(n(!0),r(h,null,p(e.parts,(s,c)=>(n(),r(h,{key:c},[Math.round(s.ratio)&&c!==0?(n(),r("circle",{key:0,class:"aioseo-donut-chart-score__circle",stroke:"#FFFFFF","stroke-dasharray":`${Math.round(s.ratio)} ${parseFloat(99-Math.round(s.ratio))}`,"stroke-linecap":"round","stroke-width":2.5,fill:"none",cx:"16.91549431",cy:"16.91549431",r:"15.91549431"},null,8,D)):i("",!0),Math.round(s.ratio)?(n(),r("circle",{key:1,class:"aioseo-donut-chart-score__circle",stroke:s.color,"stroke-dasharray":`${Math.round(s.ratio)===100?100:Math.round(s.ratio)-1} 100`,"stroke-linecap":"round","stroke-width":2,fill:"none",cx:"16.91549431",cy:"16.91549431",r:"15.91549431"},null,8,P)):i("",!0)],64))),128))])):i("",!0),a("div",V,[a("div",U,[a("div",I,[v(m,{max:32,"constrain-to-element":t.$el},{default:g(()=>[e.animatedNumber?(n(),_(d,{key:0,number:parseInt(e.total)},null,8,["number"])):(n(),r("div",{key:1,innerHTML:parseInt(e.total)},null,8,W))]),_:1},8,["constrain-to-element"])]),a("div",O,w(e.label),1)])])])}const G=f(H,[["render",j]]),K={emits:["onLabelClick"],components:{CoreDonutChart:G,UtilAnimatedNumber:k},props:{parts:{type:Array,required:!0},total:{type:Number,required:!0},label:{type:String,required:!0},link:{type:String,required:!1},animatedNumber:{type:Boolean,default(){return!0}}},computed:{sortedParts(){const t=this.parts.map(o=>o);return t.forEach(function(o,e){o.last&&(t.push(t[e]),t.splice(e,1))}),t}},methods:{handleLabelClick(t,o){o!=null&&o.emitValue&&(t.preventDefault(),this.$emit("onLabelClick",o.emitValue))}}},R={class:"aioseo-donut-chart-with-legend"},J={class:"chart-left"},Q={class:"chart-right"},X={class:"legend-amount"},Y=["innerHTML"],Z={key:0,class:"chart-more"},ee=["innerHTML"];function te(t,o,e,y,b,l){const d=u("core-donut-chart"),m=u("util-animated-number");return n(),r("div",R,[a("div",J,[v(d,{parts:e.parts,total:e.total,label:e.label,animatedNumber:e.animatedNumber},null,8,["parts","total","label","animatedNumber"])]),a("div",Q,[(n(!0),r(h,null,p(l.sortedParts,(s,c)=>(n(),r("div",{class:"legend",key:c},[a("div",{class:"legend-bullet",style:C(`background-color: ${s.color}`)},null,4),a("span",X,[e.animatedNumber?(n(),_(m,{key:0,number:parseInt(s.count)},null,8,["number"])):(n(),r("div",{key:1,innerHTML:parseInt(s.count)},null,8,Y))]),(n(),_(M(s.link?"a":"span"),{href:s.link||null,class:$(["legend-label",{"is-link":s.link}]),onClick:x=>l.handleLabelClick(x,s)},{default:g(()=>[L(w(s.name),1)]),_:2},1032,["href","class","onClick"]))]))),128)),e.link&&e.total>0?(n(),r("div",Z,[a("span",{innerHTML:e.link},null,8,ee)])):i("",!0)])])}const re=f(K,[["render",te]]);export{re as C};
