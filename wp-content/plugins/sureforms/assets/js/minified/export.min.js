function exportForm(e){let o=new XMLHttpRequest;o.open("POST",srfm_export.ajaxurl,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){var e,t;200<=o.status&&o.status<400?(e=JSON.parse(o.responseText),(t=document.createElement("a")).href="data:application/json,"+encodeURIComponent(JSON.stringify(e)),t.download="sureforms-export-form.json",t.click()):console.log("Server Error!")},o.onerror=function(){console.log("Connection Error!")},o.send(`action=export_form&post_id=${e}&nonce=`+srfm_export.srfm_export_nonce)}function bulkExport(){var e=document.querySelector("#doaction");let t=document.querySelector("#bulk-action-selector-top");e&&t&&e.addEventListener("click",e=>{if("export"===t.value){e.preventDefault();e=document.querySelectorAll("#the-list input[type=checkbox]");let t=[];e.forEach(e=>{e.checked&&t.push(e.value)}),0<t.length&&exportForm(t)}})}let data;function handleFileChange(e){var e=e.target.files[0],t=new FileReader;t.onload=e=>{e=JSON.parse(e.target.result),data=e,e=document.querySelector("#import-form-submit");e&&e.removeAttribute("disabled")},t.readAsText(e)}let handleImportForm=()=>{data&&wp.apiFetch({method:"POST",path:"/sureforms/v1/sureforms_import",body:JSON.stringify(data),headers:{"Content-Type":"application/json","X-WP-Nonce":srfm_export.import_form_nonce}}).then(e=>{if(!e?.success)throw new Error("HTTP error! Status: "+e.status);window.location.reload()}).catch(e=>{var t=document.querySelector("#srfm-import-error");t&&(t.style.display="block"),console.log(e)})};function importForm(){var e=document.querySelector(".srfm-import-btn");let t=document.querySelector(".srfm-import-wrap");var o=document.querySelector("#import-form-submit");e&&e.addEventListener("click",e=>{e.preventDefault(),t&&t.classList.toggle("srfm-show")}),o&&o.addEventListener("click",e=>{e.preventDefault(),handleImportForm()})}function appendImportBtn(){var e,t=()=>{var e=document.createElement("button");return e.className="button button-secondary srfm-import-btn",e.textContent=srfm_export?.import_btn_string,e},o=document.querySelector("#posts-filter .search-box");o?o.appendChild(t()):(o=document.querySelector("#posts-filter"),e=document.querySelector(".sureform-blank-page-title"),o&&!e&&o.prepend(t()))}document.addEventListener("DOMContentLoaded",function(){appendImportBtn(),importForm(),bulkExport()});