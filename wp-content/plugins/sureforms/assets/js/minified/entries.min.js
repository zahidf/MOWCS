window.addEventListener("load",function(){if(document.querySelector(".entry-notes")){const r=document.querySelector(".srfm-add-entry-note-button"),o=document.querySelector(".srfm-entry-note-wrapper .entry-notes-container"),c=document.querySelector(".add-notes-field"),i=c.querySelector("#srfm-entry-note");var e=c.querySelector("button");r.addEventListener("click",function(e){e.preventDefault(),r.classList.add("hidden"),c.classList.remove("hidden")}),e.addEventListener("click",async function(e){e.preventDefault();e=new FormData;e.append("note",i.value),e.append("entryID",srfm_entries.entryID),await fetch(srfm_entries.ajaxURLs.saveNotes,{method:"POST",body:e}).then(e=>e.json()).then(e=>{o.innerHTML=e.data,i.value=""})})}{const a=document.getElementById("srfm-resend-notification-modal"),s=document.querySelector(".srfm-resend-notification-trigger-btn");if(a||s){const d={},l=document.querySelectorAll(".sureforms-table-container tbody .check-column input");e=document.querySelectorAll(".sureforms-table-container .column-cb input");l.forEach(function(e){e.addEventListener("input",function(){d[this.value]=this.checked,n()})}),e.forEach(function(e){e.addEventListener("input",function(){l.forEach(function(e){d[e.value]=e.checked}),n()})});const u=a.querySelector(".recipient-field-group"),f=(a.querySelector('[name="send_to"]')?.addEventListener("change",function(){"default"===this.value?u.classList.add("hidden"):u.classList.remove("hidden")}),a.querySelectorAll(".srfm-resend-notification-field"));var e=a.querySelector(".srfm-resend-notification"),t=a.querySelector(".srfm-cancel-resend-notification");const m=a.querySelector(".in-progress-overlay");function n(){0<Object.keys(d).filter(e=>!0===d[e]).length?s.classList.remove("hidden"):s.classList.add("hidden")}s.addEventListener("click",function(e){e.preventDefault(),a.querySelector("details")?.remove(),a.showModal()}),e?.addEventListener("click",async function(e){e.preventDefault(),a.querySelector("details")?.remove(),m.classList.remove("hidden");const t=new FormData;f.forEach(function(e){t.append(e.getAttribute("name"),e.value)}),Object.keys(d).length&&t.append("entry_ids",Object.keys(d).filter(e=>!0===d[e]).join(",")),await fetch(srfm_entries.ajaxURLs.resendNotification,{method:"POST",body:t}).then(e=>e.json()).then(e=>{e?.success?a.querySelector(".modal-content")?.insertAdjacentHTML("beforeend",e?.data):alert(e?.data)}).finally(()=>m.classList.add("hidden"))}),t.addEventListener("click",function(e){e.preventDefault(),a.close()})}}});